<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <title>재라의 넌센스 Quiz 맞추기</title>
    <link rel="stylesheet" href="./main.css">
</head>
<body>
    <h1>넌센스 Quiz 맞추기</h1>
    <p>3문제 중복있음</p>
    <p id="time">0초</p>

    <h3><a href="" id="startBt">시작</a></h3>
    <p id="quiz"></p>

    <form id="input_form" style="display: none;">
        <input type="text">
    </form>
    <p id="score"></p>

    <footer>재라의 넌센스 Quiz</footer>

    <script>

        let score = 0;
        let count = 0;
        let randomnum = 0;
        let seconds =0;
        let timerId;

        const quizArray = [
                { quiz: "왕이 넘어지면", answer:"킹콩" },
                { quiz: "오리가 얼면", answer:"언덕" },
                { quiz: "한국의 수도는", answer:"서울" },
                { quiz: "물고기의 반대말은", answer:"불고기" },
                { quiz: "병아리가 잘 먹는 약은", answer:"삐약" },
                { quiz: "소나무가 삐지면", answer:"칫솔" }
            ];
            
        $("#startBt").on("click", function(e){
            e.preventDefault();
            $("#input_form").hide().slideDown();
            $("#input_form").children().focus();
            clearInterval(timerId);
            quizstart();
            seconds=0;
        });

        // 시작버튼 클릭하면
        // 시간이 흐르면서 문제가 나오고
        // 문제 3개를 풀고나면 시간이 멈춘다
        // 버튼을 누를때마다 시간타이머 중복금지해야함

        $("#input_form").on("submit", function(e){
            e.preventDefault();
            const answer = quizArray[randomnum].answer;
            const user = $("#input_form").children().focus().val();

            count ++;
            
            if(user == answer) {
                score++;
                $("#score").text(`3문제 중에서 ${score}개 맞췄습니다`);
            }
            else {
                $("#score").text(`3문제 중에서 ${score}개 맞췄습니다`);
            }
            
            $("#input_form").children().focus().val("");

            if(count == 3) {
                $("#input_form").hide();
                $("#quiz").hide();
                count = 0;
                score = 0;
                clearInterval(timerId);
                seconds=0;
            }
            
        });

        function quizstart() {
            timerId = setInterval(function(){
                seconds++;
                $("#time").text(seconds+`초`);
            }, 1000);

            randomnum = Math.floor(Math.random()*quizArray.length);
            $("#quiz").text(quizArray[randomnum].quiz);
        }
    </script>
</body>
</html>